{"version":3,"sources":["public/app/components/addData-form/data-form-cmp.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;YAYA;gBAEI,qBAAoB,WAAwB,EAAU,MAAc,EAAU,WAAwB;oBAAlF,gBAAW,GAAX,WAAW,CAAa;oBAAU,WAAM,GAAN,MAAM,CAAQ;oBAAU,gBAAW,GAAX,WAAW,CAAa;oBAKtG,cAAS,GAAY,KAAK,CAAC;oBAC3B,gBAAW,GAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACxC,cAAS,GAAc;wBACnB,UAAU,EAAE,SAAS;qBACxB,CAAC;oBARE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAChB,CAAC;gBAUO,0BAAI,GAAZ;oBAAA,iBAYC;oBAVG,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;oBAEtD,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;wBAEd,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;6BACtC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;6BACtB,SAAS,CAAC,UAAA,SAAS;4BAChB,KAAI,CAAC,SAAS,GAAG,SAAS,CAAC;wBAC/B,CAAC,CAAC,CAAC;oBACX,CAAC;gBACL,CAAC;gBAED,8BAAQ,GAAR;oBAAA,iBAeC;oBAbG,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBAEvB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;yBACpC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;yBACtB,SAAS,CAAC,UAAA,MAAM;wBACb,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;wBAC5B,KAAI,CAAC,SAAS,GAAG,CAAC,KAAI,CAAC,MAAM,CAAC;wBAE9B,EAAE,CAAC,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC;4BACjB,KAAI,CAAC,SAAS,EAAE,CAAC;wBACrB,CAAC;oBAEL,CAAC,CAAC,CAAC;gBACX,CAAC;gBAED,+BAAS,GAAT;oBACI,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC7C,CAAC;gBAED,sBAAI,mCAAU;yBAAd,cAAmB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;;;mBAAA;gBAxD/D;oBAAC,oBAAS,CAAC;wBACP,QAAQ,EAAE,WAAW;qBACxB,CAAC;oBACD,eAAI,CAAC;wBACF,WAAW,EAAE,4CAA4C;wBACzD,UAAU,EAAE,CAAC,0BAAe,EAAE,0BAAe,CAAC;qBACjD,CAAC;;+BAAA;gBAqDF,kBAAC;YAAD,CApDA,AAoDC,IAAA;YApDD,qCAoDC,CAAA","file":"public/app/components/addData-form/data-form-cmp.js","sourcesContent":["import {Component, View, FORM_DIRECTIVES, CORE_DIRECTIVES, EventEmitter} from 'angular2/angular2';\nimport {RouteParams, Router} from 'angular2/router';\n\nimport {DataService} from '../core/data-service';\n\n@Component({\n    selector: 'data-form'\n})\n@View({\n    templateUrl: 'app/components/addData-form/data-form.html',\n    directives: [FORM_DIRECTIVES, CORE_DIRECTIVES]\n})\nexport class DataFormCmp {\n\n    constructor(private routeParams: RouteParams, private router: Router, private dataService: DataService) {\n        this.init();\n    }\n    \n    errors: any[];\n    formSaved: boolean = false;\n    reputations: number[] = [1, 2, 3, 4, 5];\n    formModel: App.IData = {\n        EquimentID: undefined\n    };\n\n\n    private init() {\n\n        var equipmentID = this.routeParams.get('EquipmentId');\n\n        if (equipmentID) {\n\n            this.dataService.one(parseInt(equipmentID))\n                .map(res => res.json())\n                .subscribe(formModel => {\n                    this.formModel = formModel;\n                });\n        }\n    }\n\n    saveForm() {\n\n        this.formSaved = false;\n\n        this.dataService.saveData(this.formModel)\n            .map(res => res.json())\n            .subscribe(result => {\n                this.errors = result.errors;\n                this.formSaved = !this.errors;\n\n                if (this.formSaved) {\n                    this.fireEvent();\n                }\n\n            });\n    }\n\n    fireEvent() {\n        this.dataService.formSavedEvent.next('');\n    }\n\n    get diagnostic() { return JSON.stringify(this.formModel); }\n\n\n}\n"],"sourceRoot":"/source/"}